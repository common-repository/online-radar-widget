+function(f){var a="[data-toggle=bfh-selectbox]",g=function(i,h){this.options=f.extend({},f.fn.bfhselectbox.defaults,h);this.$element=f(i);this.initSelectBox()};g.prototype={constructor:g,initSelectBox:function(){var h;h="";this.$element.find("div").each(function(){h=h+'<li><a tabindex="-1" href="#" data-option="'+f(this).data("value")+'">'+f(this).html()+"</a></li>"});this.$element.html('<input type="hidden" name="'+this.options.name+'" value=""><a class="bfh-selectbox-toggle '+this.options.input+'" role="button" data-toggle="bfh-selectbox" href="#"><span class="bfh-selectbox-option"></span><span class="'+this.options.icon+' selectbox-caret"></span></a><div class="bfh-selectbox-options"><div role="listbox"><ul role="option"></ul></div></div>');this.$element.find("[role=option]").html(h);if(this.options.filter===true){this.$element.find(".bfh-selectbox-options").prepend('<div class="bfh-selectbox-filter-container"><input type="text" class="bfh-selectbox-filter form-control"></div>')}this.$element.val(this.options.value);this.$element.on("click.bfhselectbox.data-api touchstart.bfhselectbox.data-api",a,g.prototype.toggle).on("keydown.bfhselectbox.data-api",a+", [role=option]",g.prototype.keydown).on("mouseenter.bfhselectbox.data-api","[role=option] > li > a",g.prototype.mouseenter).on("click.bfhselectbox.data-api","[role=option] > li > a",g.prototype.select).on("click.bfhselectbox.data-api",".bfh-selectbox-filter",function(){return false}).on("propertychange.bfhselectbox.data-api change.bfhselectbox.data-api input.bfhselectbox.data-api paste.bfhselectbox.data-api",".bfh-selectbox-filter",g.prototype.filter)},toggle:function(k){var j,i,h;j=f(this);i=d(j);if(i.is(".disabled")||i.attr("disabled")!==undefined){return true}h=i.hasClass("open");c();if(!h){i.trigger(k=f.Event("show.bfhselectbox"));if(k.isDefaultPrevented()){return true}i.toggleClass("open").trigger("shown.bfhselectbox").find('[role=option] > li > [data-option="'+i.val()+'"]').focus()}return false},filter:function(){var i,h,j;i=f(this);h=d(i);j=f("[role=option] li a",h);j.hide().filter(function(){return(f(this).text().toUpperCase().indexOf(i.val().toUpperCase())!==-1)}).show()},keydown:function(m){var l,o,k,n,j,i,h;if(!/(38|40|27)/.test(m.keyCode)){return true}l=f(this);m.preventDefault();m.stopPropagation();k=d(l);j=k.hasClass("open");if(!j||(j&&m.keyCode===27)){if(m.which===27){k.find(a).focus()}return l.click()}o=f("[role=option] li:not(.divider) a:visible",k);if(!o.length){return true}f("body").off("mouseenter.bfh-selectbox.data-api","[role=option] > li > a",g.prototype.mouseenter);i=o.index(o.filter(":focus"));if(m.keyCode===38&&i>0){i=i-1}if(m.keyCode===40&&i<o.length-1){i=i+1}if(!i){i=0}o.eq(i).focus();f("body").on("mouseenter.bfh-selectbox.data-api","[role=option] > li > a",g.prototype.mouseenter)},mouseenter:function(){var h;h=f(this);h.focus()},select:function(k){var j,i,h,l;j=f(this);k.preventDefault();k.stopPropagation();if(j.is(".disabled")||j.attr("disabled")!==undefined){return true}i=d(j);i.val(j.data("option"));i.trigger("change.bfhselectbox");c()}};function c(){var h;f(a).each(function(i){h=d(f(this));if(!h.hasClass("open")){return true}h.trigger(i=f.Event("hide.bfhselectbox"));if(i.isDefaultPrevented()){return true}h.removeClass("open").trigger("hidden.bfhselectbox")})}function d(h){return h.closest(".bfh-selectbox")}var b=f.fn.bfhselectbox;f.fn.bfhselectbox=function(h){return this.each(function(){var k,j,i;k=f(this);j=k.data("bfhselectbox");i=typeof h==="object"&&h;this.type="bfhselectbox";if(!j){k.data("bfhselectbox",(j=new g(this,i)))}if(typeof h==="string"){j[h].call(k)}})};f.fn.bfhselectbox.Constructor=g;f.fn.bfhselectbox.defaults={icon:"caret",input:"form-control",name:"",value:"",filter:false};f.fn.bfhselectbox.noConflict=function(){f.fn.bfhselectbox=b;return this};var e;if(f.valHooks.div){e=f.valHooks.div}f.valHooks.div={get:function(h){if(f(h).hasClass("bfh-selectbox")){return f(h).find('input[type="hidden"]').val()}else{if(e){return e.get(h)}}},set:function(j,k){var i,h;if(f(j).hasClass("bfh-selectbox")){i=f(j);if(i.find("li a[data-option='"+k+"']").length>0){h=i.find("li a[data-option='"+k+"']").html()}else{if(i.find("li a").length>0){h=i.find("li a").eq(0).html()}else{k="";h=""}}i.find('input[type="hidden"]').val(k);i.find(".bfh-selectbox-option").html(h)}else{if(e){return e.set(j,k)}}}};f(document).ready(function(){f("div.bfh-selectbox").each(function(){var h;h=f(this);h.bfhselectbox(h.data())})});f(document).on("click.bfhselectbox.data-api",c)}(window.jQuery);