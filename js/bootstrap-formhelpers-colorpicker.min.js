+function(e){var f="[data-toggle=bfh-colorpicker]",h=function(k,j){this.options=e.extend({},e.fn.bfhcolorpicker.defaults,j);this.$element=e(k);this.initPopover()};h.prototype={constructor:h,initPalette:function(){var k,j,l;k=this.$element.find("canvas");j=k[0].getContext("2d");l=j.createLinearGradient(0,0,k.width(),0);l.addColorStop(0,"rgb(255, 255, 255)");l.addColorStop(0.1,"rgb(255,   0,   0)");l.addColorStop(0.25,"rgb(255,   0, 255)");l.addColorStop(0.4,"rgb(0,     0, 255)");l.addColorStop(0.55,"rgb(0,   255, 255)");l.addColorStop(0.7,"rgb(0,   255,   0)");l.addColorStop(0.85,"rgb(255, 255,   0)");l.addColorStop(1,"rgb(255,   0,   0)");j.fillStyle=l;j.fillRect(0,0,j.canvas.width,j.canvas.height);l=j.createLinearGradient(0,0,0,k.height());l.addColorStop(0,"rgba(255, 255, 255, 1)");l.addColorStop(0.5,"rgba(255, 255, 255, 0)");l.addColorStop(0.5,"rgba(0,     0,   0, 0)");l.addColorStop(1,"rgba(0,     0,   0, 1)");j.fillStyle=l;j.fillRect(0,0,j.canvas.width,j.canvas.height)},initPopover:function(){var j,k;j="";k="";if(this.options.align==="right"){k='<span class="input-group-addon"><span class="bfh-colorpicker-icon"></span></span>'}else{j='<span class="input-group-addon"><span class="bfh-colorpicker-icon"></span></span>'}this.$element.html('<div class="input-group bfh-colorpicker-toggle" data-toggle="bfh-colorpicker">'+j+'<input type="text" name="'+this.options.name+'" class="'+this.options.input+'" placeholder="'+this.options.placeholder+'">'+k+'</div><div class="bfh-colorpicker-popover"><canvas class="bfh-colorpicker-palette" width="384" height="256"></canvas></div>');this.$element.on("click.bfhcolorpicker.data-api touchstart.bfhcolorpicker.data-api",f,h.prototype.toggle).on("mousedown.bfhcolorpicker.data-api","canvas",h.prototype.mouseDown).on("click.bfhcolorpicker.data-api touchstart.bfhcolorpicker.data-api",".bfh-colorpicker-popover",function(){return false});this.initPalette();this.$element.val(this.options.color)},updateVal:function(o,n){var r,k,m,l,q,j,p;q=5;r=this.$element.find("canvas");k=r[0].getContext("2d");m=o-r.offset().left;l=n-r.offset().top;m=Math.round(m/q)*q;l=Math.round(l/q)*q;if(m<0){m=0}if(m>=r.width()){m=r.width()-1}if(l<0){l=0}if(l>r.height()){l=r.height()}j=k.getImageData(m,l,1,1);p=g(j.data[0],j.data[1],j.data[2]);if(p!==this.$element.val()){this.$element.val(p);this.$element.trigger("change.bfhcolorpicker")}},mouseDown:function(l){var k,j;k=e(this);j=d(k);e(document).on("mousemove.bfhcolorpicker.data-api",{colorpicker:j},h.prototype.mouseMove).one("mouseup.bfhcolorpicker.data-api",{colorpicker:j},h.prototype.mouseUp)},mouseMove:function(k){var j;j=k.data.colorpicker;j.data("bfhcolorpicker").updateVal(k.pageX,k.pageY)},mouseUp:function(k){var j;j=k.data.colorpicker;j.data("bfhcolorpicker").updateVal(k.pageX,k.pageY);e(document).off("mousemove.bfhcolorpicker.data-api");if(j.data("bfhcolorpicker").options.close===true){i()}},toggle:function(m){var l,k,j;l=e(this);k=d(l);if(k.is(".disabled")||k.attr("disabled")!==undefined){return true}j=k.hasClass("open");i();if(!j){k.trigger(m=e.Event("show.bfhcolorpicker"));if(m.isDefaultPrevented()){return true}k.toggleClass("open").trigger("shown.bfhcolorpicker");l.focus()}return false}};function a(k){var j=k.toString(16);return j.length===1?"0"+j:j}function g(l,k,j){return"#"+a(l)+a(k)+a(j)}function i(){var j;e(f).each(function(k){j=d(e(this));if(!j.hasClass("open")){return true}j.trigger(k=e.Event("hide.bfhcolorpicker"));if(k.isDefaultPrevented()){return true}j.removeClass("open").trigger("hidden.bfhcolorpicker")})}function d(j){return j.closest(".bfh-colorpicker")}var c=e.fn.bfhcolorpicker;e.fn.bfhcolorpicker=function(j){return this.each(function(){var m,l,k;m=e(this);l=m.data("bfhcolorpicker");k=typeof j==="object"&&j;this.type="bfhcolorpicker";if(!l){m.data("bfhcolorpicker",(l=new h(this,k)))}if(typeof j==="string"){l[j].call(m)}})};e.fn.bfhcolorpicker.Constructor=h;e.fn.bfhcolorpicker.defaults={align:"left",input:"form-control",placeholder:"",name:"",color:"#000000",close:true};e.fn.bfhcolorpicker.noConflict=function(){e.fn.bfhcolorpicker=c;return this};var b;if(e.valHooks.div){b=e.valHooks.div}e.valHooks.div={get:function(j){if(e(j).hasClass("bfh-colorpicker")){return e(j).find('input[type="text"]').val()}else{if(b){return b.get(j)}}},set:function(j,k){if(e(j).hasClass("bfh-colorpicker")){e(j).find(".bfh-colorpicker-icon").css("background-color",k);e(j).find('input[type="text"]').val(k)}else{if(b){return b.set(j,k)}}}};e(document).ready(function(){e("div.bfh-colorpicker").each(function(){var j;j=e(this);j.bfhcolorpicker(j.data())})});e(document).on("click.bfhcolorpicker.data-api",i)}(window.jQuery);